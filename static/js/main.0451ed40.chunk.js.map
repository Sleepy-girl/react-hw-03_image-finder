{"version":3,"sources":["components/imageGallery/imageGallery.module.css","components/button/button.module.css","components/App.module.css","components/searchbar/searchbar.module.css","components/searchbar/Searchbar.js","components/imageGallery/ImageGallery.js","components/imageGalleryItem/ImageGalleryItem.js","components/button/Button.js","service/imagesApi.js","components/modal/Modal.js","components/App.js","index.js","components/imageGalleryItem/imageGalleryItem.module.css","components/modal/modal.module.css"],"names":["module","exports","Searchbar","state","inputValue","handleChange","e","setState","target","value","handleSubmit","preventDefault","props","onSubmit","className","styles","SearchForm","type","onClick","this","SearchFormButton","SearchFormButtonLabel","SearchFormInput","onChange","placeholder","Component","ImageGallery","children","ImageGalleryItem","images","showMadal","map","image","key","id","largeImageURL","src","webformatURL","alt","ImageGalleryItemImage","Button","searchQuery","page","axios","get","then","response","data","hits","Modal","closingByEsc","code","onClose","window","addEventListener","removeEventListener","Overlay","imageLarge","App","loading","error","showModal","fetchImages","imagesApi","prevState","catch","finally","handleSearchFormSubmit","query","toggleSrc","console","log","closeModal","prevProps","scrollTo","top","document","documentElement","scrollHeight","behavior","length","color","height","width","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.0451ed40.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"imageGallery_ImageGallery__3Wt07\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"button_Button__l6X__\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__2s_Fq\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"searchbar_Searchbar__3VK8i\",\"SearchForm\":\"searchbar_SearchForm__pn92P\",\"SearchFormButton\":\"searchbar_SearchFormButton__1EFLt\",\"SearchFormButtonLabel\":\"searchbar_SearchFormButtonLabel__Jj-ZB\",\"SearchFormInput\":\"searchbar_SearchFormInput__2L7V0\"};","import React, { Component } from 'react';\nimport styles from './searchbar.module.css';\n\nclass Searchbar extends Component {\n  state = {\n    inputValue: '',\n  };\n\n  handleChange = e => {\n    this.setState({ inputValue: e.target.value });\n  };\n\n  handleSubmit = e => {\n    e.preventDefault();\n    // console.log(this.state.inputValue);\n    this.props.onSubmit(this.state.inputValue);\n    this.setState({ inputValue: '' });\n  };\n\n  render() {\n    return (\n      <>\n        <header className={styles.Searchbar}>\n          <form className={styles.SearchForm}>\n            <button\n              type=\"submit\"\n              onClick={this.handleSubmit}\n              className={styles.SearchFormButton}\n            >\n              <span className={styles.SearchFormButtonLabel}>Search</span>\n            </button>\n\n            <input\n              className={styles.SearchFormInput}\n              type=\"text\"\n              value={this.state.inputValue}\n              onChange={this.handleChange}\n              // autocomplete=\"off\"\n              // autofocus\n\n              placeholder=\"Search images and photos\"\n            />\n          </form>\n        </header>\n      </>\n    );\n  }\n}\n\nexport default Searchbar;\n","import React from 'react';\nimport styles from './imageGallery.module.css';\n\nfunction ImageGallery({ children }) {\n  return (\n    <>\n      <ul className={styles.ImageGallery}>{children}</ul>\n    </>\n  );\n}\n\nexport default ImageGallery;\n","import React from 'react';\n// import Modal from '../modal/Modal';\nimport styles from './imageGalleryItem.module.css';\n\nfunction ImageGalleryItem({ images, showMadal, onClick }) {\n  return (\n    <>\n      {images.map(image => (\n        <li\n          key={image.id}\n          className={styles.ImageGalleryItem}\n          onClick={() => onClick(image.largeImageURL)}\n        >\n          <img\n            src={image.webformatURL}\n            alt=\"\"\n            className={styles.ImageGalleryItemImage}\n          />\n          {/* {showMadal && <Modal src={image.largeImageURL} onClick={onClick} />} */}\n        </li>\n      ))}\n    </>\n  );\n}\n\nexport default ImageGalleryItem;\n","import React from 'react';\nimport styles from './button.module.css';\n\nfunction Button({ onClick }) {\n  return (\n    <>\n      <button type=\"button\" className={styles.Button} onClick={onClick}>\n        Lord more\n      </button>\n      {/* {window.scrollTo({\n        top: document.documentElement.scrollHeight,\n        behavior: 'smooth',\n      })} */}\n    </>\n  );\n}\n\nexport default Button;\n","import axios from 'axios';\n\nconst fetchImagesWithQuery = (searchQuery, page = 1) => {\n  return axios\n    .get(\n      `https://pixabay.com/api/?q=${searchQuery}&page=${page}&key=17611748-6d67051009b1653d75232e8c8&image_type=photo&orientation=horizontal&per_page=12`,\n    )\n    .then(response => response.data.hits);\n\n  // return fetch(\n  //   `https://pixabay.com/api/?q=${searchQuery}&page=${page}&key=17611748-6d67051009b1653d75232e8c8&image_type=photo&orientation=horizontal&per_page=12`,\n  // )\n  //   .then(res => res.json())\n  //   .then(data => data.hits);\n};\n\nexport default {\n  fetchImagesWithQuery,\n};\n","import React, { Component } from 'react';\nimport styles from './modal.module.css';\n\nclass Modal extends Component {\n  componentDidMount() {\n    window.addEventListener('keydown', this.closingByEsc);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.closingByEsc);\n  }\n\n  closingByEsc = e => {\n    if (e.code === 'Escape') {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    return (\n      <>\n        <div className={styles.Overlay} onClick={this.props.onClose}>\n          <div className={styles.Modal}>\n            <img src={this.props.imageLarge} alt=\"\" />\n          </div>\n        </div>\n      </>\n    );\n  }\n}\n\nexport default Modal;\n","import React, { Component } from 'react';\nimport Searchbar from '../components/searchbar/Searchbar';\nimport Loader from 'react-loader-spinner';\nimport ImageGallery from '../components/imageGallery/ImageGallery';\nimport ImageGalleryItem from '../components/imageGalleryItem/ImageGalleryItem';\nimport Button from '../components/button/Button';\nimport imagesApi from '../service/imagesApi';\nimport Modal from '../components/modal/Modal';\n\nimport styles from './App.module.css';\n\nclass App extends Component {\n  state = {\n    images: [],\n    loading: false,\n    error: null,\n    searchQuery: '',\n    page: 0,\n    largeImageURL: null,\n    showModal: false,\n  };\n\n  // componentDidMount() {\n  //   // this.setState({\n  //   //   loading: true,\n  //   // });\n  //   // this.fetchImages();\n  // }\n\n  componentDidUpdate(prevProps, prevState) {\n    const prevQuery = prevState.searchQuery;\n    const nextQuery = this.state.searchQuery;\n\n    if (prevQuery !== nextQuery) {\n      this.fetchImages(); //запрос\n      // window.addEventListener('scroll', this.handleScroll);\n      window.scrollTo({\n        top: document.documentElement.scrollHeight,\n        behavior: 'smooth',\n      });\n    }\n  }\n\n  // componentWillUnmount() {\n  //   window.removeEventListener('scroll', this.handleScroll);\n  // }\n\n  // handleScroll = e => {\n  //   if (this.state.images.length > 0) {\n  //     scrollTo({\n  //       top: document.documentElement.scrollHeight,\n  //       behavior: 'smooth',\n  //     });\n  //   }\n  // };\n\n  fetchImages = () => {\n    const { searchQuery } = this.state;\n\n    this.setState({ loading: true });\n\n    imagesApi\n      .fetchImagesWithQuery(searchQuery)\n      .then(images =>\n        this.setState(prevState => ({\n          images: [...prevState.images, ...images],\n          page: prevState.page + 1,\n        })),\n      )\n      .catch(error => this.setState({ error }))\n      .finally(() => this.setState({ loading: false }));\n  };\n\n  handleSearchFormSubmit = query => {\n    this.setState({ searchQuery: query, page: 0, images: [] });\n  };\n\n  toggleSrc = largeImageURL => {\n    this.setState(prevState => ({\n      showModal: !prevState.showModal,\n      largeImageURL: largeImageURL,\n    }));\n    console.log('toggleSrc');\n  };\n\n  closeModal = () => {\n    this.setState(prevState => ({\n      showModal: !prevState.showModal,\n      largeImageURL: null,\n    }));\n    console.log('toggleSrc');\n  };\n\n  render() {\n    const { images, loading, error, showModal, largeImageURL } = this.state;\n    return (\n      <div className={styles.App}>\n        <Searchbar onSubmit={this.handleSearchFormSubmit} />\n        {error && <span>Error. Something went wrong</span>}\n        <ImageGallery>\n          {images.length > 0 && (\n            <ImageGalleryItem images={images} onClick={this.toggleSrc} />\n          )}\n          {images.length > 0 && !loading && (\n            <Button onClick={this.fetchImages} />\n          )}\n          {showModal && (\n            <Modal imageLarge={largeImageURL} onClose={this.closeModal} />\n          )}\n          {/* {largeImageURL && <Modal />} */}\n        </ImageGallery>\n        {loading && (\n          <Loader\n            type=\"Puff\"\n            color=\"#00BFFF\"\n            height={100}\n            width={100}\n            // timeout={3000}\n          />\n        )}\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"imageGalleryItem_ImageGalleryItem__2nKCI\",\"ImageGalleryItemImage\":\"imageGalleryItem_ImageGalleryItemImage__1cGqL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"modal_Overlay__2PQZK\",\"Modal\":\"modal_Modal__3qVwQ\"};"],"sourceRoot":""}